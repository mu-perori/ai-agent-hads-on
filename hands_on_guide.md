# 作って学ぶAIエージェント〜watsonx.aiでチャットボットを作ってみよう〜
watsonx.ai上で使用できるGoogle、Wikipedia検索や、Pythonコードの生成・実行などのツールを用いて汎用的なAIエージェントを作ります。

![完成イメージ図](./images/overall.jpg)

## 【AIエージェント作成の前に】通常のLLMとチャットしてみよう
### Prompt Labを開く
1. `Prompt Lab`のパネルをクリック
![ホーム画面](images/0010.png)
2. ポップアップはすべてチェックをつけて`ツアーのスキップ`を選択
![Prompt Labのポップアップ](images/0011.png)

### モデルの選択
1. モデルのパネルをクリック
2. `すべての基盤モデルを表示する`をクリック
![モデルのパネルがクリックされた状態](images/0020.png)
3. `mistral-large`をクリック
![基盤モデルの選択](images/0030.png)
4. `モデルの選択`をクリック
![選択ボタン](images/0040.png)

### 大統領を質問してみましょう
1. 入力欄に「2025年のアメリカ大統領は誰ですか？」と入力して送信
![入力欄に文字が入った状態](images/0050.png)
2. 想定した回答は返ってくるでしょうか？
3. watsonx.aiのホーム画面に戻る
![Prompt Labの回答例](images/0060.png)

## 汎用的なAIエージェントを作ろう
### Agent Lab (AIエージェントのビルドツール) を開く
1. `AIエージェントを構築してタスクを自動化する with Agent Lab`のパネルをクリック
2. ポップアップは全て×ボタンで消す
![ホーム画面](images/1010.png)

### モデルの選択
1. モデルのパネルをクリック
2. `すべての基盤モデルを表示する`をクリック
![モデルのパネルがクリックされた状態](images/1020.png)
3. `mistral-large`をクリック
![基盤モデルの選択](images/1030.png)
4. `モデルの選択`をクリック
![選択ボタン](images/1040.png)

### Setup
1. Setupを開く
2. `名前`を決める
    - 例) ワトソンくん
3. `説明`を書く
    - 例) とっても優秀なアシスタント
4. `アイコン`をカスタム
5. `プレースホルダー画像`をカスタム
6. `クイックスタートに関する質問`を入力 (ワンクリックで質問できるパネルが追加できる機能)
    ```
    2025年のアメリカ大統領は誰ですか？
    ```
![Setupの完成形](images/1050.png)

### Configuration
- **今回は変更しない**
    - フレームワーク
        - AIエージェントの実装を支援するための具体的なツールやライブラリ
        - LangGraph: LangChainを基盤とした、エージェントやワークフローをグラフ構造で定義・制御できるフレームワーク
    - アーキテクチャー
        - AIエージェントの内部構造や動作原理を定義する設計原則やモデル
        - ReAct: AIエージェントが複雑なタスクを解決するために、推論（Reasoning）と行動（Acting）を組み合わせて効率的に行動するためのフレームワーク
    - 説明
        - AIエージェントへの指示(プロンプト)

![Configurationの初期状態](images/1060.png)

### Tools
1. `ツールを追加する`をクリック
![Toolsの初期状態](images/1070.png)
2. 下記のツールを選択
    - Google 検索
    - Wikipedia検索
    - Python 通訳者
    ![ツールの選択画面で3つ選択された状態](images/1080.png)
    <!-- 上記画像Pythonが復活し次第差し替え -->
    - 詳細の定義は初期値のままでOK
    ![パラメータ](images/1090.png)
3. AIエージェント完成です🎉
4. (補足) 詳細の定義の解説
    - `結果の最大件数`: ツールがLLM(生成AI)に渡す情報の数の最大値を設定
5. (補足) カスタムツールの作成
    - オリジナルのツールを作成することも可能
    - 詳しくは[appendix.mdの「カスタムツールを作成する」](appendix.md#カスタムツールを作成する)を参照

### 早速質問してみましょう
1. 先ほど設定した質問パネル「2025年のアメリカ大統領は誰ですか？」をクリック
![質問パネルがある状態のAgent Labのトップ画面](images/1100.png)
2. `どうしてこんな答えが返ってきたのだろう？`をクリック
![どうしてこんな答えが返ってきたのだろう？が開いた状態](images/1110.png)
3. アコーディオンメニューを開く
4. 出力のプロセスを確認
    - 道具だ: このプロセスで使用したツール
    - 入力: LLM(生成AI)がツールに渡した情報
    - 出力: ツールがLLM(生成AI)に渡した情報
![アコーディオンメニューの一番上が開いた状態](images/1120.png)

### 作成したAIエージェントを保存する
1. 保存ボタンをクリック
2. `名前をつけて保存`をクリック
![名前をつけて保存が表示されている状態](images/1130.png)
3. 資産タイプの`エージェント`をクリック
4. `保存`をクリック
![エージェントが選択された保存モーダルが表示されている状態](images/1140.png)
5. `保存されたエージェント`を開いて保存したエージェントが登録されていることを確認
![Saved agentsが開いている状態](images/1150.png)
6. (補足) 保存後LLMモデルが自動的に変更されてしまう場合があるため、使用したいLLMに設定されているか要確認

### 他の質問をしてみる
-  IBMとは？
<!-- -  GDPトップ5を棒グラフで教えてください -->
<!-- 上記Pythonが復活し次第コメントアウト解除 -->

#### 出力結果の例
###### IBMとは？
![回答](images/1160.png)
![どうしてこんな答えが返ってきたのだろう？が開いた状態](images/1170.png)
![アコーディオンメニューの一番上が開いた状態](images/1180.png)

<!-- ###### GDPトップ5を棒グラフで教えてください
![どうしてこんな答えが返ってきたのだろう？が開いた状態](images/1190.png)
![アコーディオンメニューの一番上が開いた状態](images/1200.png) -->
<!-- 上記2画像Pythonが復活し次第差し替え -->

